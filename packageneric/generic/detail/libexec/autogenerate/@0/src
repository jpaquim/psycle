#! /usr/bin/env bash
. $PACKAGENERIC__ROOT/packageneric/generic/bin/posix.shell &&

##############################################################################
#
# This source is free software ; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation ; either version 2, or (at your option) any later version.
# Copyright (C) 1999-2005 Psycledelics http://psycle.pastnotecut.org : Johan Boule
#
# autotools autogenerator plugin
#
# \meta generic
# \meta standard posix
#
##############################################################################

set -eu &&

main()
{
	local output__ac=$PACKAGENERIC__OUTPUT/autotools/autoconf/$PACKAGENERIC__SUBPATH &&
	local output__am=$PACKAGENERIC__OUTPUT/autotools/automake/$PACKAGENERIC__SUBPATH &&
	mkdir -p $output__ac $output__am &&
	{
		cat > $output__ac/PACKAGENERIC__CONFIGURATION__HEADER_WITH_NAMESPACE.ac <<-eof
			#! /usr/bin/autoconf
			# This file was autogenerated by $PACKAGENERIC__SUBPATH ; do not edit.
		eof
	} &&
	{
		cat > $output__am/SUBDIRS.am <<-eof
			#! /usr/bin/automake
			# This file was autogenerated by $PACKAGENERIC__SUBPATH ; do not edit.
		eof
	} &&
	{
		cat > $output__am/DISTCLEANFILES.am <<-eof
			#! /usr/bin/automake
			# This file was autogenerated by $PACKAGENERIC__SUBPATH ; do not edit.
		eof
	} &&
	{
		cat > $output__am/nobase_dist_include_HEADERS.am <<-eof
			#! /usr/bin/automake
			# This file was autogenerated by $PACKAGENERIC__SUBPATH ; do not edit.
		eof
	} &&
	{
		cat > $output__am/nobase_nodist_include_HEADERS.am <<-eof
			#! /usr/bin/automake
			# This file was autogenerated by $PACKAGENERIC__SUBPATH ; do not edit.
		eof
	} &&
	if test -d $(basename $PACKAGENERIC__SUBPATH)
	then
		cd $(basename $PACKAGENERIC__SUBPATH) &&
		echo SUBDIRS += $(basename $PACKAGENERIC__SUBPATH) >> $output__am/SUBDIRS.am &&
		for file in $(eval find . $(packageneric__find__file -name \\\*.hpp.in ! -name \\\*.private.hpp.in))
		do
			local namespace=$(echo $(dirname $file)/ | sed 's:/detail/:/:' | sed 's:^./::' | sed 's:/$::' | sed 's:/:__:g') &&
			echo PACKAGENERIC__CONFIGURATION__HEADER_WITH_NAMESPACE\($(basename $PACKAGENERIC__SUBPATH)/$(dirname $file)/$(basename $file .hpp.in), $namespace\) >> $output__ac/PACKAGENERIC__CONFIGURATION__HEADER_WITH_NAMESPACE.ac &&
			echo DISTCLEANFILES += $(dirname $file)/$(basename $file .in) >> $output__am/DISTCLEANFILES.am &&
			echo nobase_nodist_pkgversioninclude_HEADERS += $(dirname $file)/$(basename $file .in) >> $output__am/nobase_nodist_include_HEADERS.am ||
			return
		done &&
		for file in $(eval find . $(packageneric__find__file \\\( -name \\\*.hpp -or -name \\\*.h \\\) ! -name \\\*.private.hpp))
		do
			echo nobase_dist_pkgversioninclude_HEADERS += $file >> $output__am/nobase_dist_include_HEADERS.am ||
			return
		done
	fi
} &&

main "$@"
