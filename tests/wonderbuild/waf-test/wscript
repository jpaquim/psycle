#! /usr/bin/env waf

APPNAME = 'waf-test'
VERSION = '0.0.1'

srcdir = '.'
blddir = '++build'

def init():
	pass

def set_options(opt):
	opt.tool_options('compiler_cxx')

def configure(conf):
	conf.check_tool('compiler_cxx')
	
def build(bld):
	#bld.add_subdirs('../diversalis')

	foo = bld.new_task_gen('cxx', 'shlib')
	foo.name = 'foo-sh'
	foo.target = 'foo'
	foo.source = ['foo.cpp']

	foo = bld.new_task_gen('cxx', 'staticlib')
	foo.name = 'foo-st'
	foo.target = 'foo'
	foo.source = ['foo.cpp']

	p = bld.new_task_gen('cxx', 'program')
	p.target = 'main-st'
	p.source = ['main.cpp']
	p.uselib_local = ['foo-st']

	p = bld.new_task_gen('cxx', 'program')
	p.target = 'main-sh'
	p.source = ['main.cpp']
	p.uselib_local = ['foo-sh']

	bld.install_files('${PREFIX}/include', ['foo.hpp', 'bar.hpp'])
	#bld.install_as('${PREFIX}/include/foo/foo.hpp', 'foo.hpp')

def shutdown():
	pass
