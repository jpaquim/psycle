#!/bin/bash

##############################################################################
#
# This source is free software ; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation ; either version 2 of the License, or (at your option) any later version.
# Copyright (C) 2004-2005 Johan Boule <bohan.dyndns.org>
#
# General-purpose: yes
#
# Lists c++ files which contain any space character (instead of tabulation character) in their indentation.
# Lines whose first non blank (non space and non tabulation) character is an asterisque ('*'), followed by one space character or slash ('/'), are allowed to contain one space character before.
# Files whose name match '+*', which, with respect with the naming convention, are autogenerated files, are not checked.
#
##############################################################################

function main
{
	cd $(dirname $0)/.. &&
	find src \( -name '*.cpp' -or -name '*.hpp' -or -name '*.hpp.in' \) -and ! -name '+*' \
	-exec grep --extended-regexp --with-filename --line-number '^	* ([^*]|\*[^ /])' {} \;
}

main "$@"
